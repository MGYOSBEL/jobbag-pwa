<!-- <app-navbar></app-navbar> -->
<div class="container my-5">
  <div class="row">
    <div class="col">
      <figure class="figure">
        <img src='../../../assets/img/defaultProfile.png' class="figure-img img-thumbnail rounded-circle"
          alt="Profile Picture">
      </figure>
    </div>
    <div class="col py-5">
      <div class="alert alert-danger" *ngIf=editError.err role="alert">
        {{editError.message}}
      </div>
      <div class="alert alert-success" *ngIf=editOK.ok role="success">
        {{editOK.message}}
      </div>

      <form [formGroup]="editUserForm" (ngSubmit)="saveUser()">
        <div class="row form-group mb-1">
          <fieldset class="col-12 mx-0 px-0">

            <div class="my-2">
              <input
                [ngClass]="editUserForm.get('name').invalid && (editUserForm.get('name').dirty || editUserForm.get('name').touched) ? 'is-invalid' : '' "
                class="form-control input-lg" name="name" placeholder="username" formControlName="name">
              <div class="invalid-feedback">
                You must enter a username!
              </div>

            </div>

            <div class="my-2">
              <input
                [ngClass]="editUserForm.get('email').invalid && (editUserForm.get('email').dirty || editUserForm.get('email').touched) ? 'is-invalid' : '' "
                class="form-control input-lg" name="email" placeholder="email@gmail.com" formControlName="email">
              <div class="invalid-feedback">
                <p *ngIf="editUserForm.get('email').hasError('required')">
                  You must enter an email!
                </p>
                <p *ngIf="editUserForm.get('email').hasError('email')">
                  You must enter a valid email!
                </p>
              </div>
            </div>

            <div >
              <div class="my-2 ">
                <input *ngIf="showPassword"
                  [ngClass]="editUserForm.get('password').invalid && (editUserForm.get('password').dirty || editUserForm.get('password').touched) ? 'is-invalid' : '' "
                  class="form-control input-lg" name="password" formControlName="password" type="password"
                  placeholder="********(password)">
                <div class="invalid-feedback">
                  <p *ngIf="editUserForm.get('password').hasError('required')">
                    You must enter a password!
                  </p>
                  <p *ngIf="editUserForm.get('password').hasError('minlength')">
                    You password must have at least 5 characters!
                  </p>
                </div>
              </div>

              <div class="my-2">
                <input *ngIf="showPassword"
                  [ngClass]="(editUserForm.hasError('passwordsMissmatch') || editUserForm.get('confirmPassword').invalid) && (editUserForm.get('confirmPassword').dirty || editUserForm.get('confirmPassword').touched) ? 'is-invalid' : '' "
                  class="form-control input-lg" name="confirmPassword" formControlName="confirmPassword" type="password"
                  placeholder="********(confirm password)">
                <div class="invalid-feedback">
                  <p *ngIf="editUserForm.get('confirmPassword').hasError('required')">
                    You must confirm your password!
                  </p>
                  <p
                    *ngIf="!editUserForm.get('confirmPassword').hasError('required') && editUserForm.hasError('passwordsMissmatch')">
                    Your passwords must be equals!
                  </p>
                </div>
              </div>
            </div>
            <div class="row mt-1 justify-content-center">
              <button *ngIf="!showPassword"class="btn btn-primary text-center btn-lg" style="background-color: #B3BE35;"
                (click)=togglePasswords()>I want to change my password</button>
              <button *ngIf="showPassword" class="btn btn-primary  text-center btn-lg" style="background-color: #932877;"
                (click)=togglePasswords()>I prefer not to change my password</button>
            </div>

          </fieldset>

        </div>

        <div class="row mt-1">
          <button class="btn btn-primary btn-block text-center btn-lg" type="submit" style="background-color: #2787C4;"
            [disabled]="editUserForm.invalid || loading">Save Changes</button>
        </div>
        <div class="row my-5 py-5 justify-content-center" [hidden]="!loading">
          <div class="spinner-border" style="color: #2787C4;" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </div>


      </form>

    </div>
  </div>
</div>

<div class="divline my-5"></div>

<app-profile-extras></app-profile-extras>
<app-birefcase-edit></app-birefcase-edit>
